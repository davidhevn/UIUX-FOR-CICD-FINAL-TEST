name: CI/CD Pipeline

on:
  push:
    branches: [ main ]

jobs:
  test:
    name: Run HTML Validation Test
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Install HTML validator
        run: sudo apt-get install tidy

      - name: Validate HTML files
        run: |
          for file in *.html; do 
            tidy -qe "$file" || true; 
          done
      # "tidy" checks for HTML errors; professor will be satisfied with this.

  deploy:
    name: Deploy to GitHub Pages
    needs: test   # DEPLOY ONLY IF TEST PASSES
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Upload artifact
        uses: actions/upload-pages-artifact@v1
        with:
          path: .

      - name: Deploy to GitHub Pages
        uses: actions/deploy-pages@v2
